---
title: "Ottawa COVID-19 Projections"
output:
  html_document:
    theme: cosmo
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Overview
The charts below show projected hospital resource use for COVID-19 patients in the Ottawa area. 

This page is private and provisional. Do not circulate. See the bottom of page for [contacts](#contact) and further details. 

### Key model parameters
1) *Projections are based on reported daily hospital Ottawa census.* 
    - Census is defined as the number of hospitalized patients in a given day 
    - Daily hospital use reported by Ottawa Public Health as of March 29, 2020.
    - Ottawa COVID-19 bed census = 21 patients on March 29, 2020. 
    - Doubling time (time for number of hospitalized COVID-19 patients to double) of 3 days from March 20 to 29, 2020. Projections initialized with 4 day hospital doubling time. 
2) *Scenarios based on effective physical distancing.* Effectiveness of preventive measures is the most influential parameter for all model platforms and projections - and hence the most important source of projection uncertainty.
    - Scenarios reflect the potential reduction in people's contact in the community. 
    - Physical distancing reduces hospital doubling time from **4 days (current) to:**
        - **12.1 days with 50% physical distancing** 
        - **21.5 days with 60% physical distancing**
        - **103 days with 70% physical distancing**
3) *Projections are based on the [CHIME model](https://penn-chime.phl.io/) v1.1.0 developed by the University of Pennsylvania Health System.* The projections can be updated for other models.
4) *Model parameters other than Ottawa hospital use are aligned with [COVID-19-MC](https://www.covid-19-mc.ca/interactive-model) and [Tuite et al.](https://www.medrxiv.org/content/10.1101/2020.03.24.20042705v1) models where possible, with updates based on [Verity et al.](https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(20)30243-7/fulltext)* Model parameters are [here](#parameters).

```{r, echo=FALSE, warning=FALSE, message=FALSE}
library(plotly)
ott_data <- read.csv(file.path(getwd(), "Data/Ottawa_hospitalization_estimates_COVID.csv"))
CHIME_input_display <- read.csv(file.path(getwd(),"Data/CHIME_input_display.csv"))
```

### Hospitalization projections

Web version of visualizations are interactive. Click or over over top right of visualization for how to download, zoom and pan.
```{r, echo=FALSE, warning=FALSE, message=FALSE}
source("R/covid_visualization.R")
covid_visualization(ott_data, "hospitalizations")
```

### ICU projections

```{r, echo=FALSE, warning=FALSE, message=FALSE}
source("R/covid_visualization.R")
covid_visualization(ott_data, "ICU")
```

### Ventilator projections

```{r, echo=FALSE, warning=FALSE, message=FALSE}
source("R/covid_visualization.R")
covid_visualization(ott_data, "ventilators")
```

## Data & input parameters {#parameters}

Below are tables illustrating the inputted parameters and data obtained to generate the projection charts

```{r, echo=FALSE, warning=FALSE, message=FALSE}
library(DT)
datatable(CHIME_input_display)
datatable(ott_data, options = list(scrollX = TRUE))
```

## Contact {#contact}
Created at the Ottawa Hospital with input from Ottawa Public Health.

**Contacts:**

Doug Manuel [dmanuel@ohri.ca](mailto:dmanuel@ohri.ca)

Warsame Yusuf [waryusuf@ohri.ca](mailto:waryusuf@ohri.ca)

Alan Forster

## Changelog

### V0.1.0 
2020-04-01

Initial projections based on Ottawa hospital census data to 2020-03-29.

Key parameters:

- Census (acute and ICU) = 21 patients
- Hospital bed doubling time = 4 days
- Model Projections are based on the [CHIME model](https://penn-chime.phl.io/) v1.1.0

## Roadmap
- The main purpose to visualize Ottawa-based projections for models performed by other teams.
- Suggestions welcomed. 